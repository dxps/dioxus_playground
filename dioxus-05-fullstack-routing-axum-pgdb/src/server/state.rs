#[cfg(feature = "server")]
use axum::{
    async_trait,
    extract::{FromRef, FromRequestParts},
};
#[cfg(feature = "server")]
use http::{request::Parts, StatusCode};

// ------------------------------------------------------------------------------------------------

#[cfg(feature = "server")]
#[derive(Clone)]
pub struct ServerState(pub std::sync::Arc<sqlx::Pool<sqlx::Postgres>>);

// #[cfg(feature = "server")]
// #[async_trait]
// impl<S> FromRequestParts<S> for ServerState
// where
//     Self: FromRef<S>,
//     S: Send + Sync,
// {
//     type Rejection = (StatusCode, String);

//     async fn from_request_parts(_parts: &mut Parts, state: &S) -> Result<Self, Self::Rejection> {
//         Ok(Self::from_ref(state))
//     }
// }
